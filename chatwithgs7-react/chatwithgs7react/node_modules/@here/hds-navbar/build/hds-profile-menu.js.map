{"version":3,"file":"hds-profile-menu.js","sourceRoot":"","sources":["../src/hds-profile-menu.ts"],"names":[],"mappings":"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","sourcesContent":["import {customElement} from '@here/hds-base';\nimport '@here/hds-avatar';\nimport '@here/hds-icon';\nimport '@here/hds-list';\nimport {html, LitElement, nothing, PropertyValues} from 'lit';\nimport {property} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {styles} from './hds-profile-menu.css.js';\nimport {NavBarTopVariant} from './hds-navbar-top.js';\n\nexport type ProfileMenuChangePayload = {open: boolean};\n\n/**\n * @slot default Content for the `hds-list-item` elements for the menu\n * @slot profile-info Additional info for signed-in state\n * @slot signup-link Link for sign-up\n * @slot singup-info Additional info for sign-up state\n * @slot before-tray Custom content before profile card\n * @slot before-tray Custom content after profile card\n *\n * @event {CustomEvent<{open: boolean}>} change Fired when the menu state has changed: open / close `ProfileMenuChangePayload`\n */\n@customElement('hds-profile-menu')\nexport class ProfileMenu extends LitElement {\n  static styles = styles;\n\n  @property({type: String, attribute: 'profile-name'}) profileName = '';\n  @property({type: String, attribute: 'profile-email'}) profileEmail = '';\n  @property({type: String, attribute: 'avatar-image-url'}) avatarImageUrl = '';\n  @property({type: Boolean, attribute: 'open', reflect: true}) open = false;\n  @property({type: Boolean, attribute: 'signup', reflect: true}) signup = false;\n  @property({type: String, attribute: false}) navBarTopVariant: NavBarTopVariant = 'default';\n  @property({type: Boolean, attribute: 'no-trigger'}) noTrigger = false;\n\n  constructor() {\n    super();\n    this._handleDocumentClick = this._handleDocumentClick.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback && super.connectedCallback();\n    this.ownerDocument.addEventListener('click', this._handleDocumentClick, true);\n  }\n\n  disconnectedCallback() {\n    this.ownerDocument.removeEventListener('click', this._handleDocumentClick, true);\n    super.disconnectedCallback && super.disconnectedCallback();\n  }\n\n  protected updated(changedProperties: PropertyValues) {\n    if (changedProperties.has('open') && changedProperties.get('open') !== undefined) {\n      this.dispatchEvent(\n        new CustomEvent<ProfileMenuChangePayload>('change', {\n          detail: {\n            open: this.open,\n          },\n        })\n      );\n    }\n  }\n\n  protected renderAvatar(isSignUp?: boolean) {\n    if (isSignUp) {\n      return html` <hds-avatar icon=\"profile\" icon-style=\"solid\"></hds-avatar>`;\n    }\n\n    return html` <hds-avatar\n      name=\"${this.profileName}\"\n      image-url=\"${this.avatarImageUrl}\"\n    ></hds-avatar>`;\n  }\n\n  protected renderTrigger() {\n    if (this.noTrigger) return nothing;\n\n    return html` <div\n      class=\"hds-profile-menu-closed-avatar\"\n      tabindex=\"0\"\n      @click=\"${this._handleClick}\"\n    >\n      <span class=\"hds-avatar-wrapper\" aria-label=\"${this.profileName} profile\" role=\"button\">\n        ${this.renderAvatar(this.signup)}\n      </span>\n    </div>`;\n  }\n\n  protected renderProfile() {\n    const isLoggedIn =\n      !this.signup && (this.profileName || this.profileEmail || this.avatarImageUrl);\n    const isLoggedOut = this.signup;\n\n    let template = html``;\n\n    if (isLoggedIn) {\n      template = html` <div class=\"hds-profile-details\">\n        <span\n          class=\"hds-profile-details-avatar-wrapper\"\n          aria-label=\"${this.profileName} profile\"\n          role=\"button\"\n          tabindex=\"0\"\n        >\n          ${this.renderAvatar(this.signup)}\n        </span>\n        <span class=\"hds-profile-details-text-container\">\n          <span class=\"hds-profile-details-text hds-profile-details-text--name\">\n            ${this.profileName}\n          </span>\n          <span class=\"hds-profile-details-text hds-profile-details-text--email\">\n            ${this.profileEmail}\n          </span>\n          <div class=\"hds-profile-details-text hds-profile-details-text--info\">\n            <slot name=\"profile-info\"></slot>\n          </div>\n        </span>\n      </div>`;\n    } else if (isLoggedOut) {\n      template = html` <div class=\"hds-profile-details\">\n        <span\n          class=\"hds-profile-details-avatar-wrapper\"\n          aria-label=\"profile\"\n          role=\"button\"\n          tabindex=\"0\"\n        >\n          ${this.renderAvatar(this.signup)}\n        </span>\n        <slot name=\"signup-link\"></slot>\n        <div class=\"hds-profile-details-text-container\">\n          <div class=\"hds-profile-details-text hds-profile-details-text--info\">\n            <slot name=\"singup-info\"></slot>\n          </div>\n        </div>\n      </div>`;\n    }\n\n    return template;\n  }\n\n  protected render() {\n    const profileMenuClasses = {\n      'hds-profile-menu': true,\n      'signed-in': !this.signup,\n      'not-signed-in': this.signup,\n      open: !this.noTrigger && this.open,\n      'no-trigger': this.noTrigger,\n      'has-trigger': !this.noTrigger,\n      [`--navbar-top-variant-${this.navBarTopVariant}`]: true,\n    };\n\n    return html`\n      <div class=\"hds-profile-menu-wrapper\">\n        ${this.renderTrigger()}\n        <div class=\"${classMap(profileMenuClasses)}\">\n          <slot name=\"before-tray\"></slot>\n          ${this.renderProfile()}\n          <slot></slot>\n          <slot name=\"after-tray\"></slot>\n        </div>\n      </div>\n    `;\n  }\n\n  private _handleDocumentClick(e: Event) {\n    const closestProfileMenu =\n      (<HTMLElement>e.target).closest &&\n      (<HTMLElement>e.target).closest(this.tagName.toLowerCase());\n\n    if (closestProfileMenu !== this) {\n      this.open = false;\n    }\n  }\n\n  private _handleClick(e: Event) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.open = !this.open;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'hds-profile-menu': ProfileMenu;\n  }\n}\n"]}