{"version":3,"file":"hds-tab.js","sourceRoot":"","sources":["../src/hds-tab.ts"],"names":[],"mappings":"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","sourcesContent":["import {customElement, BaseElement, findElementsInSlot, closestElement} from '@here/hds-base';\nimport '@here/hds-icon';\nimport {IconCategory} from '@here/hds-iconlibrary';\nimport {html, LitElement, nothing, PropertyValues} from 'lit';\nimport {property, query, state} from 'lit/decorators.js';\nimport {ClassInfo, classMap} from 'lit/directives/class-map.js';\nimport {ifDefined} from 'lit/directives/if-defined.js';\nimport {TabBar, TabBarVariant} from './hds-tab-bar.js';\nimport {TabPanelContainer} from './hds-tab-panel-container.js';\nimport {styles} from './hds-tab.css.js';\n\nexport type TabSelectPayload = string;\n\n/**\n *\n * @slot default Content for the label\n *\n * @event {CustomEvent<string>} tabselect (**Internal event**) Fired when item is selected, internal use only `TabSelectPayload`\n */\n@customElement('hds-tab')\nexport class Tab extends BaseElement {\n  static tabIdCounter = 0;\n  static styles = styles;\n  static shadowRootOptions = {...LitElement.shadowRootOptions, delegatesFocus: true};\n  isTabbable = true;\n  @property({type: String}) icon = '';\n  @property({type: String, attribute: 'icon-category'}) iconCategory: IconCategory = 'core-ui';\n  @property({type: Boolean}) link = false;\n  @property({type: Boolean, attribute: 'click-action'}) clickAction = false;\n  @property({type: Boolean, attribute: 'external-link'}) externalLink = false;\n  @property({type: Boolean}) disabled = false;\n  @property({type: String, attribute: 'aria-controls'}) ariaControls;\n  @property({type: String, attribute: 'aria-role'}) ariaRole = 'tab';\n  @property({type: String, attribute: 'tab-panel-id'}) tabPanelId = '';\n  @property({type: Boolean, reflect: true}) selected = false;\n  @property({type: String, attribute: false}) variant: TabBarVariant = 'default';\n  @property({type: Boolean}) chevron = false;\n\n  @state() rightSideIcon = '';\n  @state() showMenu = false;\n  @query('#menu') protected menuItemsSlot!: HTMLSlotElement;\n  @query('slot:not([name])', false) protected defaultSlot!: HTMLSlotElement;\n\n  get clickActionValue(): boolean {\n    return this.clickAction;\n  }\n\n  showSelectedTabMenu(showMenu: boolean): void {\n    this.showMenu = showMenu;\n\n    if (this.hasMenuContent()) {\n      this.rightSideIcon = showMenu ? 'chevron-up' : 'chevron-down';\n    } else {\n      this.rightSideIcon = '';\n    }\n  }\n\n  protected updated(_changedProperties: PropertyValues) {\n    if (this.selected && _changedProperties.has('selected')) {\n      const tabBar = closestElement<TabBar>('hds-tab-bar', this);\n      const tabPanelContainer = this.ownerDocument.querySelector(\n        `[tab-bar-id=\"${tabBar!.id}\"]`\n      ) as TabPanelContainer;\n      if (tabPanelContainer) {\n        tabPanelContainer.selectedPanel = this.tabPanelId;\n      }\n    }\n  }\n\n  protected renderIcon(_icon: string, _category: IconCategory) {\n    if (!_icon) {\n      return nothing;\n    }\n    return html` <hds-icon name=\"${_icon}\" size=\"16px\" category=\"${_category}\"></hds-icon>`;\n  }\n\n  protected renderIconRight(_icon: string, _category: IconCategory) {\n    if (!_icon || (!this.chevron && _icon.startsWith('chevron-'))) {\n      return nothing;\n    }\n    return html` <hds-icon name=\"${_icon}\" size=\"16px\" category=\"${_category}\"></hds-icon>`;\n  }\n\n  protected firstUpdated() {\n    this.id = this.id || `hds-tab-${++Tab.tabIdCounter}`;\n    if (this.hasMenuContent()) {\n      this.rightSideIcon = 'chevron-down';\n    } else if (this.link && this.externalLink) {\n      this.rightSideIcon = 'external-link';\n    } else {\n      this.rightSideIcon = '';\n    }\n  }\n\n  protected render() {\n    const classes = {\n      tab: true,\n      disabled: this.disabled,\n      'hds-tab--icon-label': this.icon,\n      'hds-tab--icon-actionable': this.rightSideIcon,\n      'external-link': this.externalLink,\n    };\n    classes[`hds-tab--variant-${this.variant}`] = true;\n    const slotClasses = {\n      'hds-tab-menu-wrapper--show-menu': this.showMenu,\n    };\n    // eslint-disable-next-line  lit-a11y/mouse-events-have-key-events\n    return html`\n      <div\n        class=\"hds-tab-wrapper\"\n        @click=\"${this._handleClick}\"\n        @keydown=\"${this._handleKeydown}\"\n        @mouseover=\"${this._handleMouseMove}\"\n        @mouseout=\"${this._handleMouseMove}\"\n      >\n        ${this.link ? this._renderAsLink(classes) : this._renderAsButton(classes)}\n        <slot id=\"menu\" class=\"hds-tab-menu-wrapper ${classMap(slotClasses)}\" name=\"menu\"></slot>\n      </div>\n    `;\n  }\n\n  private _handleKeydown = (e: KeyboardEvent) => {\n    switch (e.key) {\n      case 'Enter':\n      case ' ':\n        this.showMenu = true;\n        break;\n      case 'Tab':\n        this.showMenu = false;\n        break;\n    }\n  };\n\n  private hasMenuContent(): boolean {\n    return this.menuItemsSlot.assignedNodes({flatten: true}).length !== 0;\n  }\n\n  private _renderAsLink(classes: ClassInfo) {\n    return html`\n      <div\n        class=\"${classMap(classes)}\"\n        role=\"${ifDefined(this.ariaRole)}\"\n        aria-selected=\"${ifDefined(this.selected)}\"\n        aria-disabled=\"${ifDefined(this.disabled)}\"\n        aria-controls=\"${ifDefined(this.ariaControls)}\"\n        ?disabled=\"${this.disabled}\"\n      >\n        ${this.renderIcon(this.icon, this.iconCategory)}\n        <slot></slot>\n        ${this.renderIconRight(this.rightSideIcon, 'core-ui')}\n      </div>\n    `;\n  }\n\n  private _renderAsButton(classes: ClassInfo) {\n    return html`\n      <button\n        class=\"${classMap(classes)}\"\n        role=\"${ifDefined(this.ariaRole)}\"\n        aria-selected=\"${ifDefined(this.selected)}\"\n        aria-disabled=\"${ifDefined(this.disabled)}\"\n        aria-controls=\"${ifDefined(this.ariaControls)}\"\n        ?disabled=\"${this.disabled}\"\n      >\n        ${this.renderIcon(this.icon, this.iconCategory)}\n        <slot></slot>\n        ${this.renderIconRight(this.rightSideIcon, 'core-ui')}\n      </button>\n    `;\n  }\n\n  private async _handleClick(e: any) {\n    if (this.disabled) return;\n    await this.updateComplete;\n\n    this.dispatchEvent(\n      new CustomEvent<TabSelectPayload>('tabselect', {detail: this.id, bubbles: true})\n    );\n\n    if (this.link && this.externalLink && e && e.target && e.target.nodeName !== 'A') {\n      e.preventDefault();\n      e.stopPropagation();\n      const anchor = findElementsInSlot<HTMLAnchorElement>(this.defaultSlot, HTMLAnchorElement)[0];\n      if (anchor) {\n        anchor.click();\n      }\n    }\n  }\n\n  private _handleMouseMove(e: MouseEvent): void {\n    if (this.clickAction) {\n      return;\n    }\n\n    if (this.rightSideIcon && !this.link) {\n      e.preventDefault();\n\n      switch (e.type) {\n        case 'mouseout':\n          if (this.showMenu) {\n            this.showMenu = false;\n            this.rightSideIcon = 'chevron-down';\n          }\n          break;\n        case 'mouseover':\n          if (!this.showMenu) {\n            this.showMenu = true;\n            this.rightSideIcon = 'chevron-up';\n          }\n          break;\n      }\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'hds-tab': Tab;\n  }\n}\n"]}