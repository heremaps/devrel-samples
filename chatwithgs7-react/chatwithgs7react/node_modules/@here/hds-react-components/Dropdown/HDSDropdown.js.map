{"version":3,"file":"HDSDropdown.js","sourceRoot":"","sources":["../src/Dropdown/HDSDropdown.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAC,QAAQ,EAA2C,MAAM,oBAAoB,CAAC;AACtF,OAAO,EAAC,IAAI,EAAoB,MAAM,gBAAgB,CAAC;AACvD,OAAO,KAAK,EAAE,EAAC,SAAS,EAAE,mBAAmB,EAAE,MAAM,EAAC,MAAM,OAAO,CAAC;AAEpE,2BAA2B;AAC3B,IAAI,QAAQ,EAAE,CAAC;AACf,IAAI,IAAI,EAAE,CAAC;AAiBX,MAAM,WAAW,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC,KAA4B,EAAE,GAAG,EAAE,EAAE;IACzE,MAAM,EACJ,IAAI,EACJ,YAAY,EACZ,SAAS,EACT,iBAAiB,EACjB,IAAI,EACJ,OAAO,EACP,QAAQ,EACR,QAAQ,EACR,SAAS,EACT,GAAG,IAAI,EACR,GAAG,KAAK,CAAC;IACV,MAAM,QAAQ,GAAG,MAAM,CAAc,IAAI,CAAC,CAAC;IAE3C,mBAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;IAEjD,MAAM,eAAe,GAAG,CAAC,CAAiC,EAAE,EAAE;QAC5D,IAAI,CAAC,CAAC,MAAM,KAAK,QAAQ,CAAC,OAAO;YAAE,OAAO;QAC1C,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;IACjC,CAAC,CAAC;IAEF,MAAM,aAAa,GAAG,CAAC,CAAqC,EAAE,EAAE;QAC9D,IAAI,CAAC,CAAC,MAAM,KAAK,QAAQ,CAAC,OAAO;YAAE,OAAO;QAC1C,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;IACjC,CAAC,CAAC;IAEF,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,QAAQ,CAAC,OAAO,EAAE;YACpB,IAAI,QAAQ,EAAE;gBACZ,QAAQ,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,EAAE,eAAgC,CAAC,CAAC;aAC/E;SACF;QACD,OAAO,GAAG,EAAE;YACV,QAAQ,CAAC,OAAO,EAAE,mBAAmB,CAAC,QAAQ,EAAE,eAAgC,CAAC,CAAC;QACpF,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC;IAEzB,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,QAAQ,CAAC,OAAO,EAAE;YACpB,IAAI,QAAQ,EAAE;gBACZ,QAAQ,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,EAAE,aAA8B,CAAC,CAAC;aAC7E;SACF;QACD,OAAO,GAAG,EAAE;YACV,QAAQ,CAAC,OAAO,EAAE,mBAAmB,CAAC,QAAQ,EAAE,aAA8B,CAAC,CAAC;QAClF,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC;IAEzB,oCAAoC;IACpC,wDAAwD;IACxD,uCAAuC;IACvC,mBAAmB;IAEnB,OAAO,CACL,yCACM,CAAC,IAAI,IAAI,EAAC,IAAI,EAAC,CAAC,KAChB,CAAC,SAAS,IAAI,EAAC,SAAS,EAAC,CAAC,KAC1B,CAAC,SAAS,IAAI,EAAC,KAAK,EAAE,SAAS,EAAC,CAAC,KACjC,CAAC,iBAAiB;YACpB,iBAAiB,CAAC,MAAM,IAAI,EAAC,oBAAoB,EAAE,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,EAAC,CAAC,KAC9E,CAAC,YAAY,IAAI,EAAC,gBAAgB,EAAE,IAAI,EAAC,CAAC,KAC1C,IAAI,EACR,GAAG,EAAE,QAAQ;QAEZ,OAAO,IAAI,8BAAM,IAAI,EAAC,SAAS,IAAE,OAAO,CAAQ;QAChD,IAAI,IAAI,6BAAK,IAAI,EAAC,MAAM,IAAE,IAAI,CAAO,CACzB,CAChB,CAAC;AACJ,CAAC,CAAC,CAAC;AAEH,WAAW,CAAC,YAAY,GAAG;IACzB,IAAI,EAAE,KAAK;IACX,YAAY,EAAE,KAAK;IACnB,SAAS,EAAE,QAAQ;CACpB,CAAC;AAEF,eAAe,WAAW,CAAC","sourcesContent":["import {Dropdown, DropdownChangePayload, DropdownPlacement} from '@here/hds-dropdown';\nimport {List, ListSelectPayload} from '@here/hds-list';\nimport React, {useEffect, useImperativeHandle, useRef} from 'react';\n\n/* eslint-disable no-new */\nnew Dropdown();\nnew List();\n/* eslint-enable no-new */\n\ninterface HDSDropdownProperties\n  extends Omit<React.HTMLAttributes<HTMLElement>, 'onSelect' | 'onChange'> {\n  placement?: DropdownPlacement;\n  allowedPlacements?: DropdownPlacement[];\n  trigger?: React.ReactNode;\n  menu?: React.ReactNode;\n  open?: boolean;\n  hideOnScroll?: boolean;\n  /* eslint-disable no-unused-vars */\n  onSelect?: (itemIndex: ListSelectPayload) => void;\n  onChange?: (e: DropdownChangePayload) => void;\n  /* eslint-enable no-unused-vars */\n}\n\nconst HDSDropdown = React.forwardRef((props: HDSDropdownProperties, ref) => {\n  const {\n    open,\n    hideOnScroll,\n    placement,\n    allowedPlacements,\n    menu,\n    trigger,\n    onSelect,\n    onChange,\n    className,\n    ...rest\n  } = props;\n  const innerRef = useRef<HTMLElement>(null);\n\n  useImperativeHandle(ref, () => innerRef.current);\n\n  const _handleSelected = (e: CustomEvent<ListSelectPayload>) => {\n    if (e.target !== innerRef.current) return;\n    onSelect && onSelect(e.detail);\n  };\n\n  const _handleChange = (e: CustomEvent<DropdownChangePayload>) => {\n    if (e.target !== innerRef.current) return;\n    onChange && onChange(e.detail);\n  };\n\n  useEffect(() => {\n    if (innerRef.current) {\n      if (onSelect) {\n        innerRef.current.addEventListener('select', _handleSelected as EventListener);\n      }\n    }\n    return () => {\n      innerRef.current?.removeEventListener('select', _handleSelected as EventListener);\n    };\n  }, [onSelect, innerRef]);\n\n  useEffect(() => {\n    if (innerRef.current) {\n      if (onChange) {\n        innerRef.current.addEventListener('change', _handleChange as EventListener);\n      }\n    }\n    return () => {\n      innerRef.current?.removeEventListener('change', _handleChange as EventListener);\n    };\n  }, [onChange, innerRef]);\n\n  // const allowedAutoPositionsValue =\n  //   allowedAutoPositions && allowedAutoPositions.length\n  //     ? allowedAutoPositions.join(',')\n  //     : undefined;\n\n  return (\n    <hds-dropdown\n      {...(open && {open})}\n      {...(placement && {placement})}\n      {...(className && {class: className})}\n      {...(allowedPlacements &&\n        allowedPlacements.length && {'allowed-placements': allowedPlacements.join(',')})}\n      {...(hideOnScroll && {'hide-on-scroll': true})}\n      {...rest}\n      ref={innerRef}\n    >\n      {trigger && <span slot=\"trigger\">{trigger}</span>}\n      {menu && <div slot=\"menu\">{menu}</div>}\n    </hds-dropdown>\n  );\n});\n\nHDSDropdown.defaultProps = {\n  open: false,\n  hideOnScroll: false,\n  placement: 'bottom',\n};\n\nexport default HDSDropdown;\n"]}