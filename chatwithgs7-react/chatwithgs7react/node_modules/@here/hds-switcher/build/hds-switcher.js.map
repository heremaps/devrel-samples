{"version":3,"file":"hds-switcher.js","sourceRoot":"","sources":["../src/hds-switcher.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint max-classes-per-file: [\"error\", 2] */\nimport {html, LitElement, PropertyValues} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {SwitcherTab} from './hds-switcher-tab.js';\nimport {styles} from './hds-switcher.css.js';\n\nexport type SwitcherSelectPayload = {id: string; index: number};\nexport type SwitcherSize = 'small' | 'medium' | 'large';\nexport type SwitcherVariant = 'subtle' | 'solid' | 'floating' | 'on-color';\n\n/**\n * @slot default Content for the `hds-switcher-tab` elements\n *\n * @event {CustomEvent<object>} select Fired when one of the items has been selected  `SwitcherSelectPayload`\n */\n@customElement('hds-switcher')\nexport class Switcher extends LitElement {\n  static styles = styles;\n  private _tabs: SwitcherTab[] = [];\n\n  @property({type: Boolean, reflect: true}) disabled = false;\n  @property({type: String, reflect: true}) variant: SwitcherVariant = 'subtle';\n  @property({type: String, reflect: true}) size: SwitcherSize = 'medium';\n\n  protected firstUpdated() {\n    this.onSlotChange();\n  }\n\n  protected updated(_changedProperties: PropertyValues) {\n    if (\n      _changedProperties.has('size') ||\n      _changedProperties.has('variant') ||\n      _changedProperties.has('disabled')\n    ) {\n      this.updateTabs();\n    }\n  }\n\n  private async _onSelect(e: CustomEvent<string>) {\n    e.stopPropagation();\n\n    let selectedIndex = -1;\n\n    for (let t = 0; t < this._tabs.length; t += 1) {\n      if (this._tabs[t] === e.target) {\n        selectedIndex = t;\n      } else {\n        this._tabs[t].selected = false;\n      }\n    }\n\n    await this.updateComplete;\n    this.dispatchEvent(\n      new CustomEvent<SwitcherSelectPayload>('select', {\n        detail: {id: e.detail, index: selectedIndex},\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  selectFirstNotDisabled() {\n    if (this.disabled) return;\n\n    let firstNonDisabledNonSelected = -1;\n    let firstNonDisabledSelected = -1;\n\n    for (let t = 0; t < this._tabs.length; t += 1) {\n      const {selected, disabled} = this._tabs[t];\n\n      if (!selected && !disabled && firstNonDisabledNonSelected === -1) {\n        firstNonDisabledNonSelected = t;\n      }\n\n      if (selected && !disabled && firstNonDisabledSelected === -1) {\n        firstNonDisabledSelected = t;\n      }\n\n      if (\n        selected &&\n        (disabled || (firstNonDisabledSelected > -1 && firstNonDisabledSelected !== t))\n      ) {\n        this._tabs[t].selected = false;\n      }\n    }\n\n    if (firstNonDisabledNonSelected > -1 && firstNonDisabledSelected === -1) {\n      this._tabs[firstNonDisabledNonSelected].selected = true;\n    }\n  }\n\n  protected updateTabs() {\n    for (let t = 0; t < this._tabs.length; t += 1) {\n      this._tabs[t].switcherSize = this.size;\n      this._tabs[t].switcherVariant = this.variant;\n      this._tabs[t].switcherDisabled = this.disabled;\n      this._tabs[t].isFirstChild = t === 0;\n      this._tabs[t].isLastChild = t === this._tabs.length - 1;\n    }\n  }\n\n  protected async onSlotChange() {\n    this._tabs = Array.from(this.querySelectorAll('*')).filter(\n      e => e instanceof SwitcherTab\n    ) as SwitcherTab[];\n\n    this.updateTabs();\n    this.selectFirstNotDisabled();\n  }\n\n  private _onKeyDown(e: KeyboardEvent) {\n    const {activeElement: focused} = this.ownerDocument;\n\n    if (!(e.key === 'ArrowRight' || e.key === 'ArrowLeft') || !(focused instanceof SwitcherTab)) {\n      return;\n    }\n\n    let before: SwitcherTab | undefined;\n    let after: SwitcherTab | undefined;\n    let current: SwitcherTab | undefined;\n\n    for (let t = 0; t < this._tabs.length; t += 1) {\n      if (e.key === 'ArrowRight' && current && after) break;\n      if (e.key === 'ArrowLeft' && current && before) break;\n\n      const {disabled} = this._tabs[t];\n\n      if (!current && this._tabs[t] === focused) {\n        current = this._tabs[t];\n      }\n\n      if (!disabled && !current && this._tabs[t] !== focused) {\n        before = this._tabs[t];\n      }\n\n      if (!disabled && current && !after && this._tabs[t] !== focused) {\n        after = this._tabs[t];\n      }\n    }\n\n    if (e.key === 'ArrowRight' && after) after.focus();\n    else if (e.key === 'ArrowLeft' && before) before.focus();\n  }\n\n  protected render() {\n    const classes = {\n      '-hds-switcher-wrapper': true,\n      disabled: this.disabled,\n    };\n\n    classes[`hds-switcher-variant-${this.variant}`] = true;\n    classes[`hds-switcher-size-${this.size}`] = true;\n\n    return html`\n      <div\n        .ariaLabel=\"${this.ariaLabel}\"\n        .role=\"${'radiogroup'}\"\n        class=\"${classMap(classes)}\"\n        @select=\"${this._onSelect}\"\n        @keydown=\"${this._onKeyDown}\"\n        ?disabled=\"${this.disabled}\"\n      >\n        <slot @slotchange=\"${this.onSlotChange}\"></slot>\n      </div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'hds-switcher': Switcher;\n  }\n}\n"]}