{"version":3,"file":"hds-progress-indicator.js","sourceRoot":"","sources":["../src/hds-progress-indicator.ts"],"names":[],"mappings":"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","sourcesContent":["import {customElement, clamp} from '@here/hds-base';\nimport {html, LitElement, PropertyValues} from 'lit';\nimport {property, query} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {styles} from './hds-progress-indicator.css.js';\n\nexport type ProgressIndicatorColor =\n  | 'accent'\n  | 'action'\n  | 'on-light'\n  | 'on-light-subtle'\n  | 'on-dark';\nexport type ProgressIndicatorSize = 'small' | 'large';\nexport type ProgressIndicatorType = 'linear' | 'circular';\nexport type ProgressIndicatorVariant = 'indeterminate' | 'determinate';\n\ninterface CircularDimensions {\n  cx: number;\n  cy: number;\n  r: number;\n  viewBox: string;\n}\n\n@customElement('hds-progress-indicator')\nexport class ProgressIndicator extends LitElement {\n  static styles = styles;\n\n  @property({type: String}) color: ProgressIndicatorColor = 'accent';\n  @property({type: String}) size: ProgressIndicatorSize = 'small';\n  @property({type: String, attribute: 'indicator-type'}) indicatorType: ProgressIndicatorType =\n    'linear';\n  @property({type: String}) variant: ProgressIndicatorVariant = 'indeterminate';\n  @property({type: Number, reflect: true}) progress: number = 0;\n  @property({type: String, attribute: 'aria-label'}) ariaLabel;\n  @query('.circularProgress') protected circularDeterminateVariant!: HTMLElement;\n\n  private _circularProgressLength;\n\n  firstUpdated() {\n    this._circularProgressLength = this.circularDeterminateVariant?.getAttribute('r');\n  }\n\n  updated() {\n    if (this.variant !== 'determinate') return;\n\n    if (this.indicatorType === 'circular') {\n      if (this.progress === 0) {\n        this.circularDeterminateVariant.style.opacity = '0';\n      } else if (this.progress > 0) {\n        const r = this._circularProgressLength;\n        const c = Math.PI * (r * 2);\n        const pct = ((100 - this.progress) / 100) * c;\n        if (this.circularDeterminateVariant !== null) {\n          this.circularDeterminateVariant.style.opacity = '1';\n          this.circularDeterminateVariant.style.strokeDashoffset = `${Math.round(pct)}`;\n        }\n      }\n    }\n  }\n\n  // eslint-disable-next-line no-undef\n  protected update(changedProperties: PropertyValues) {\n    super.update(changedProperties);\n    this.progress = clamp(this.progress, 0, 100);\n  }\n\n  protected render() {\n    const classes = {};\n    classes[this.size] = true;\n    classes[this.color] = true;\n    classes[this.indicatorType] = true;\n    classes[this.variant] = true;\n    classes['progress-0'] = this.progress === 0;\n\n    return html`\n      <div\n        class=\"-hds-progress-indicator-wrapper ${classMap(classes)}\"\n        role=\"progressbar\"\n        aria-label=\"${this.ariaLabel || 'progress indicator'}\"\n        aria-live=\"polite\"\n      >\n        ${this.indicatorType === 'circular'\n          ? this._renderCircularVariant()\n          : this._renderLinearVariant()}\n      </div>\n    `;\n  }\n\n  private _renderLinearVariant() {\n    return html`\n      <svg width=\"100%\" height=\"2\">\n        <line class=\"track\" x1=\"0\" y1=\"50%\" x2=\"100%\" y2=\"50%\"></line>\n        <line\n          class=\"progress\"\n          x1=\"0%\"\n          y1=\"50%\"\n          x2=\"${this.variant === 'indeterminate' ? '100%' : `${clamp(this.progress, 0, 100)}%`}\"\n          y2=\"50%\"\n        ></line>\n      </svg>\n    `;\n  }\n\n  private _renderCircularVariant() {\n    const {cx, cy, r, viewBox} = this.getCircularDimensions();\n\n    return html`\n      <svg viewBox=\"${viewBox}\" xmlns=\"http://www.w3.org/2000/svg\">\n        <circle class=\"path\" cx=\"${cx}\" cy=\"${cy}\" r=\"${r}\"></circle>\n        <circle cx=\"${cx}\" cy=\"${cy}\" r=\"${r}\" class=\"circularProgress\"></circle>\n      </svg>\n    `;\n  }\n\n  private getCircularDimensions() {\n    const dimensions: Partial<CircularDimensions> = {};\n    switch (this.size) {\n      case 'small':\n        dimensions.cx = 7;\n        dimensions.r = 6;\n        break;\n      case 'large':\n      default:\n        dimensions.cx = 15;\n        dimensions.r = 14;\n        break;\n    }\n    dimensions.cy = dimensions.cx;\n    dimensions.viewBox = `0 0 ${2 * dimensions.cx} ${2 * dimensions.cy}`;\n    return dimensions;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'hds-progress-indicator': ProgressIndicator;\n  }\n}\n"]}