{"version":3,"file":"hds-dropzone.js","sourceRoot":"","sources":["../src/hds-dropzone.ts"],"names":[],"mappings":"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","sourcesContent":["import {customElement} from '@here/hds-base';\nimport '@here/hds-icon';\nimport {IconCategory} from '@here/hds-iconlibrary';\nimport '@here/hds-progress-indicator';\nimport {html, LitElement, nothing, TemplateResult} from 'lit';\nimport {property, query} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {ifDefined} from 'lit/directives/if-defined.js';\nimport {styles} from './hds-dropzone.css.js';\n\nexport type DropzoneOrientation = 'horizontal' | 'vertical';\nexport type DropzoneChangePayload = {files: FileList | null};\n\n/**\n * @event {CustomEvent<{files: FileList | null}>} change Fired when there has been a change in the filelist `DropzoneChangePayload`\n */\n@customElement('hds-dropzone')\nexport class Dropzone extends LitElement {\n  static styles = styles;\n\n  @property({type: Boolean, reflect: true}) progress = false;\n  @property({type: Boolean, attribute: false}) dragging = false;\n  @property({type: Boolean, reflect: true}) error = false;\n  @property({type: Boolean, reflect: true}) disabled = false;\n  @property({type: Boolean}) multiple = false;\n  @property({type: String}) accept = '';\n  @property({type: Object, attribute: false}) files: FileList | null = null;\n  @property({type: String}) icon = '';\n  @property({type: String, attribute: 'icon-category'}) iconCategory: IconCategory = 'core-ui';\n  @property({type: String}) orientation: DropzoneOrientation = 'horizontal';\n  @property({type: String, attribute: 'text-dropzone-browse-files'}) textDropzoneBrowseFiles =\n    'Browse files';\n  @property({type: String, attribute: 'text-dropzone-drop-files'}) textDropzoneDropFiles =\n    'Drop files here';\n  @property({type: String, attribute: 'text-dropzone-or'}) textDropzoneOr = 'or';\n  @property({type: String, attribute: 'text-dropzone-uploading'}) textDropzoneUploading =\n    'Uploading';\n  @property({type: String, attribute: 'text-dropzone-dragging-over'}) textDropzoneDraggingOver = '';\n  @property({type: String, attribute: 'text-dropzone-file-restrictions'})\n  textDropzoneFileRestrictions = '';\n  @property({type: String, attribute: 'text-assistive'}) textAssistive = '';\n  @property({type: String, attribute: 'text-error'}) textError = '';\n  @property({type: String, attribute: 'text-title'}) textTitle = '';\n  @property({type: String, attribute: 'text-file-restrictions'}) textFileRestrictions = '';\n\n  @query('input[type=file]') protected nativeInput!: HTMLInputElement;\n\n  /**\n   * Asynchronous function that clears all selected/dragged files\n   */\n  async reset() {\n    this.nativeInput.value = '';\n    await this._emitChange(this.nativeInput!.files);\n  }\n\n  browse() {\n    this.nativeInput.click();\n  }\n\n  protected render() {\n    const classes = {\n      disabled: this.disabled,\n      progress: this.progress,\n      error: this.error,\n      'dragging-over': this.dragging,\n    };\n    classes[`orientation-${this.orientation}`] = true;\n\n    const isDraggingOver =\n      this.dragging && this.textDropzoneDraggingOver && this.textDropzoneDraggingOver.length;\n\n    let dropzoneContent: TemplateResult | symbol = nothing;\n    if (this.progress) dropzoneContent = this.renderProgress();\n    else if (isDraggingOver) dropzoneContent = this.renderDraggingOver();\n    else dropzoneContent = this.renderDropzone();\n\n    return html`\n      <div\n        class=\"-hds-dropzone-wrapper ${classMap(classes)}\"\n        @drop=\"${this._onDrop}\"\n        @dragover=\"${this._onDragOver}\"\n        @dragleave=\"${this._onDragLeave}\"\n      >\n        <div class=\"header\">\n          <span> ${ifDefined(this.textTitle)} </span>\n          <span class=\"caption\"> ${ifDefined(this.textFileRestrictions)} </span>\n        </div>\n        <div class=\"dropzone\">${dropzoneContent}</div>\n        <div class=\"footer\">\n          <span class=\"caption\">\n            ${ifDefined(this.error && this.textError ? this.textError : this.textAssistive)}\n          </span>\n        </div>\n        <input\n          type=\"file\"\n          accept=\"${this.accept}\"\n          ?multiple=\"${this.multiple}\"\n          @change=\"${this._onNativeInputChange}\"\n        />\n      </div>\n    `;\n  }\n\n  private async _emitChange(files: FileList | null) {\n    if (!this.progress) {\n      this.files = files;\n      await this.updateComplete;\n      this.dispatchEvent(\n        new CustomEvent<DropzoneChangePayload>('change', {\n          detail: {files},\n          bubbles: true,\n          composed: true,\n        })\n      );\n    }\n  }\n\n  private async _onNativeInputChange(e: InputEvent) {\n    e.stopPropagation();\n    e.preventDefault();\n    await this._emitChange(this.nativeInput!.files);\n  }\n\n  private async _onDrop(e: InputEvent) {\n    this.dragging = false;\n    e.stopPropagation();\n    e.preventDefault();\n    await this._emitChange(e.dataTransfer!.files);\n  }\n\n  private _onDragOver(e: MouseEvent) {\n    this.dragging = true;\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  private _onDragLeave(e: MouseEvent) {\n    this.dragging = false;\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  private renderProgress() {\n    return html` <div class=\"row uploading\">\n      <hds-progress-indicator\n        class=\"progress-indicator\"\n        size=\"large\"\n        color=\"action\"\n        indicator-type=\"circular\"\n      ></hds-progress-indicator>\n      <div>${this.textDropzoneUploading}</div>\n    </div>`;\n  }\n\n  private renderDraggingOver() {\n    return html` <div class=\"row\">${this.textDropzoneDraggingOver}</div>`;\n  }\n\n  private renderIcon() {\n    return this.icon\n      ? html` <div class=\"row uploading\">\n          <hds-icon\n            class=\"icon\"\n            size=\"16px\"\n            name=\"${this.icon}\"\n            category=\"${this.iconCategory}\"\n          ></hds-icon>\n        </div>`\n      : nothing;\n  }\n\n  private renderSeparator() {\n    return this.orientation === 'vertical' ? html` <div class=\"row\"></div>` : nothing;\n  }\n\n  private renderDropzone() {\n    const textDropzoneBrowseFiles =\n      this.textDropzoneBrowseFiles.trim() !== '' ? this.textDropzoneBrowseFiles : 'Browse files';\n\n    return html`\n      ${this.renderIcon()}\n      <div class=\"row\">\n        <span>${this.textDropzoneDropFiles} ${this.renderSeparator()} ${this.textDropzoneOr}</span>\n        <span>${this.renderSeparator()}</span>\n        <hds-button\n          @click=\"${this.browse}\"\n          ?disabled=\"${this.disabled}\"\n          class=\"button\"\n          variant=\"link\"\n          size=\"small\"\n          icon-right=\"folder-open\"\n          icon-category=\"core-ui\"\n          >${textDropzoneBrowseFiles}</hds-button\n        >\n      </div>\n      <div class=\"row dropzone-file-restrictions\">${this.textDropzoneFileRestrictions}</div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'hds-dropzone': Dropzone;\n  }\n}\n"]}