{"version":3,"file":"hds-tooltip.js","sourceRoot":"","sources":["../src/hds-tooltip.ts"],"names":[],"mappings":"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","sourcesContent":["import {customElement, closestElement} from '@here/hds-base';\nimport {html, LitElement} from 'lit';\nimport {property} from 'lit/decorators.js';\nimport tippy from 'tippy.js';\n\n@customElement('hds-tooltip')\nexport class Tooltip extends LitElement {\n  static shadowRootOptions = {...LitElement.shadowRootOptions, delegatesFocus: true};\n  @property({type: String}) position = 'bottom';\n  @property({type: Boolean}) interactive = false;\n  @property({type: String}) trigger = 'mouseenter focus';\n  private isDisabled = false;\n  private tooltipInstance: any;\n\n  constructor() {\n    super();\n    this.hide = this.hide.bind(this);\n  }\n\n  get disabled() {\n    return this.isDisabled;\n  }\n\n  @property({type: Boolean, reflect: true}) set disabled(value: boolean) {\n    const oldVal = this.isDisabled;\n    this.isDisabled = value;\n    if (this.tooltipInstance?.length) {\n      if (this.isDisabled) {\n        this.tooltipInstance[0].disable();\n      } else {\n        this.tooltipInstance[0].enable();\n      }\n    }\n    this.requestUpdate('disable', oldVal);\n  }\n\n  get tippyInstance(): any {\n    return this.tooltipInstance;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.hide();\n  }\n\n  firstUpdated() {\n    this.createTooltip();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.destroyTooltip();\n  }\n\n  hide() {\n    this.destroyTooltip();\n  }\n\n  protected render() {\n    return html`<span>\n      <slot></slot>\n    </span>`;\n  }\n\n  private createTooltip() {\n    if (!this.id) {\n      return;\n    }\n    const parent = closestElement<HTMLElement>(\"[data-theme^='hds-']\", this) || this.parentElement!;\n    // @ts-ignore\n    this.tooltipInstance = tippy(`[data-hds-tooltip=${this.id}]`, {\n      content: this.children[0],\n      placement: this.position,\n      allowHTML: true,\n      interactive: this.interactive,\n      maxWidth: 256,\n      theme: 'hds',\n      appendTo: () => parent,\n      trigger: this.trigger,\n      offset: [0, 15],\n    });\n\n    if (this.disabled) {\n      if (this.tooltipInstance?.length) {\n        this.tooltipInstance[0].disable();\n      }\n    }\n  }\n\n  private destroyTooltip() {\n    if (this.tooltipInstance) {\n      this.tooltipInstance.forEach(instance => instance.destroy());\n      this.tooltipInstance = null;\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'hds-tooltip': Tooltip;\n  }\n}\n"]}