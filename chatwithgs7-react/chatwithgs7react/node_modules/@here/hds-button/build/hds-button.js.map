{"version":3,"file":"hds-button.js","sourceRoot":"","sources":["../src/hds-button.ts"],"names":[],"mappings":"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","sourcesContent":["import {customElement, BaseElement, closestElement, isSlotEmpty} from '@here/hds-base';\nimport {IconStyle} from '@here/hds-icon';\nimport {IconCategory} from '@here/hds-iconlibrary';\nimport {ProgressIndicatorColor} from '@here/hds-progress-indicator';\nimport {html, LitElement, nothing, PropertyValues} from 'lit';\nimport {property, query, queryAssignedNodes} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {ifDefined} from 'lit/directives/if-defined.js';\nimport {styleMap} from 'lit/directives/style-map.js';\nimport {styles} from './hds-button.css.js';\n\nexport type ButtonType = 'button' | 'submit' | 'reset';\nexport type ButtonSelectPayload = {selected: boolean};\nexport type ButtonVariant =\n  | 'primary'\n  | 'secondary'\n  | 'subtle'\n  | 'success'\n  | 'warning'\n  | 'danger'\n  | 'link'\n  | 'danger-quiet'\n  | 'success-quiet'\n  | 'warning-quiet'\n  | 'subtle-quiet'\n  | 'floating'\n  | 'on-color-primary'\n  | 'on-color-secondary';\n\nexport type ButtonSize = 'extra-small' | 'small' | 'medium' | 'large';\nconst spinnerVariantColor: {[V in ButtonVariant]: ProgressIndicatorColor} = {\n  primary: 'on-light',\n  secondary: 'on-light',\n  subtle: 'on-light',\n  danger: 'on-dark',\n  success: 'on-dark',\n  warning: 'on-light',\n  'danger-quiet': 'on-dark',\n  'success-quiet': 'on-dark',\n  'warning-quiet': 'on-light',\n  link: 'action',\n  'subtle-quiet': 'on-light-subtle',\n  floating: 'on-light',\n  'on-color-primary': 'on-light',\n  'on-color-secondary': 'on-dark',\n};\n\n/**\n * @slot default Label for the button\n * @event {CustomEvent<{selected: string}>} select Event fired when button will get selected `ButtonSelectPayload`\n */\n@customElement('hds-button')\nexport class Button extends BaseElement {\n  static styles = styles;\n  static shadowRootOptions = {...LitElement.shadowRootOptions, delegatesFocus: true};\n  @property({type: Boolean, reflect: true}) selected = false;\n  @property({type: Boolean}) selectable = false;\n  @property({type: String, reflect: true}) variant: ButtonVariant = 'primary';\n  @property({type: String, reflect: true}) size: ButtonSize = 'medium';\n  @property({type: Boolean, reflect: true}) disabled = false;\n  @property({type: String}) width?: string;\n  @property({type: String}) icon?: string;\n  @property({type: String, attribute: 'icon-style'}) iconStyle: IconStyle = 'solid';\n  @property({type: String, attribute: 'icon-category'}) iconCategory: IconCategory = 'core-ui';\n  @property({type: String, attribute: 'icon-right'}) iconRight = '';\n  @property({type: String, attribute: 'icon-right-category'})\n  iconRightCategory: IconCategory = 'core-ui';\n  @property({type: String, attribute: 'icon-right-style'}) iconRightStyle: IconStyle = 'solid';\n  @property({type: Boolean, reflect: true}) loading = false;\n  @property({type: String, reflect: true}) type: ButtonType = 'button';\n  @query('#Button') buttonElement!: HTMLButtonElement;\n  @query('slot') labelSlot!: HTMLSlotElement;\n  @queryAssignedNodes('', true) listLabelItems!: Array<Node>;\n  protected iconOnly = false;\n  protected isTabbable = true;\n\n  focus() {\n    return this.buttonElement && this.buttonElement.focus();\n  }\n\n  blur() {\n    return this.buttonElement && this.buttonElement.blur();\n  }\n\n  click() {\n    if (!this.isButtonDisabled()) {\n      this.buttonElement.click();\n    }\n  }\n\n  protected update(_changedProperties: PropertyValues) {\n    super.update(_changedProperties);\n    if (_changedProperties.has('selected') && _changedProperties.get('selected') !== undefined) {\n      this.dispatchEvent(\n        new CustomEvent<ButtonSelectPayload>('select', {\n          detail: {selected: this.selected},\n          bubbles: true,\n          composed: true,\n        })\n      );\n    }\n    if (\n      !_changedProperties.has('iconOnly') &&\n      (_changedProperties.has('icon') ||\n        _changedProperties.has('icon-style') ||\n        _changedProperties.has('icon-category'))\n    ) {\n      this.iconOnly = this.icon !== undefined && isSlotEmpty(this.listLabelItems);\n      this.requestUpdate();\n    }\n  }\n\n  protected render() {\n    const _disabled: boolean = this.isButtonDisabled();\n    const _ariaLabel: string | undefined = this.getAriaLabel();\n    const classes = {\n      'hds-button--icon': !!this.icon,\n      'hds-button--icon-right': !!this.iconRight,\n      'hds-button--icononly': this.iconOnly,\n      'hds-button--disabled': _disabled,\n      'hds-button--not-disabled': !_disabled,\n    };\n    classes[`hds-button--variant-${this.variant}`] = true;\n    classes[`hds-button--size-${this.size}`] = true;\n    if (this.variant !== 'link') classes['hds-button--loading'] = this.loading;\n    if (this.selected) classes['hds-button--selected'] = this.selected;\n\n    const labelStyles = {\n      visibility: this.loading && this.variant !== 'link' ? 'hidden' : undefined,\n    };\n\n    const localStyles = {\n      width: this.width,\n    };\n\n    return html`\n      <div @click=\"${this._handleClick}\">\n        <button\n          id=\"Button\"\n          @focus=\"${this.focus}\"\n          @blur=\"${this.blur}\"\n          class=\"hds-button ${classMap(classes)}\"\n          style=\"${styleMap(localStyles)}\"\n          ?disabled=\"${_disabled}\"\n          type=\"${this.type}\"\n          aria-label=\"${ifDefined(_ariaLabel)}\"\n        >\n          ${this.loading && this.variant !== 'link' ? this.renderSpinner() : nothing}\n          <span class=\"hds-button-label-container\" style=${styleMap(labelStyles)}>\n            ${this.renderIcon(this.icon, this.iconCategory, this.iconStyle)}\n            <span class=\"hds-button-label\">\n              <slot></slot>\n            </span>\n            ${this.renderIcon(this.iconRight, this.iconRightCategory, this.iconRightStyle)}\n          </span>\n        </button>\n      </div>\n    `;\n  }\n\n  private renderIcon(icon: string | undefined, category: string, style: string) {\n    if (!icon || icon.trim() === '') return nothing;\n\n    let iconSize = '16px';\n    if (this.iconOnly) {\n      if (this.size === 'extra-small') {\n        iconSize = '8px';\n      } else if (this.size === 'large') {\n        iconSize = '24px';\n      }\n    }\n    return html` <hds-icon\n      name=\"${icon}\"\n      size=\"${iconSize}\"\n      icon-style=\"${style}\"\n      category=\"${category}\"\n    ></hds-icon>`;\n  }\n\n  private renderSpinner() {\n    const color = this.selected ? 'on-dark' : spinnerVariantColor[this.variant];\n    return html`\n      <span class=\"hds-button-loading-container\">\n        <hds-progress-indicator\n          size=\"small\"\n          color=\"${color}\"\n          indicator-type=\"circular\"\n        ></hds-progress-indicator>\n      </span>\n    `;\n  }\n\n  private isButtonDisabled() {\n    if (this.disabled) return true;\n    if (this.variant !== 'link') return this.loading;\n    return false;\n  }\n\n  private getAriaLabel() {\n    if (!this.ariaLabel || this.ariaLabel === '') {\n      if (this.loading) {\n        return 'Loading';\n      }\n      return undefined;\n    }\n    return this.ariaLabel;\n  }\n\n  private _handleClick(e: MouseEvent): void {\n    e.stopPropagation();\n    e.preventDefault();\n    if (this.selectable) {\n      this.selected = !this.selected;\n    }\n    if (this.isButtonDisabled()) return;\n    if (!(e.target instanceof HTMLButtonElement)) return;\n\n    this.updateComplete;\n    if (this.type === 'submit' || this.type === 'reset') {\n      const form = closestElement<HTMLFormElement>('FORM', this);\n      if (form) {\n        if (this.type === 'submit') {\n          form.requestSubmit();\n        } else {\n          form.reset();\n        }\n      }\n    }\n    this.dispatchEvent(\n      new MouseEvent('click', {\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'hds-button': Button;\n  }\n}\n"]}