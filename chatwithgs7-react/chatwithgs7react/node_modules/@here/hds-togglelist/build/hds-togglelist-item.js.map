{"version":3,"file":"hds-togglelist-item.js","sourceRoot":"","sources":["../src/hds-togglelist-item.ts"],"names":[],"mappings":";AAAA,OAAO,EAAC,aAAa,EAAC,MAAM,gBAAgB,CAAC;AAC7C,OAAO,EAAC,QAAQ,EAAC,MAAM,gBAAgB,CAAC;AACxC,OAAO,EAAC,IAAI,EAAE,UAAU,EAAC,MAAM,KAAK,CAAC;AACrC,OAAO,EAAC,QAAQ,EAAE,KAAK,EAAC,MAAM,mBAAmB,CAAC;AAClD,OAAO,EAAC,QAAQ,EAAC,MAAM,6BAA6B,CAAC;AACrD,OAAO,EAAC,MAAM,EAAC,MAAM,8BAA8B,CAAC;AACpD,OAAO,EAAC,UAAU,EAA0B,MAAM,qBAAqB,CAAC;AAExE;;;;GAIG;AAEI,IAAM,cAAc,GAApB,MAAM,cAAe,SAAQ,QAAQ;IAArC;;QAEuD,eAAU,GAAG,KAAK,CAAC;QACrC,aAAQ,GAAG,KAAK,CAAC;QACf,UAAK,GAAG,CAAC,CAAC,CAAC;IAiFzD,CAAC;IA7EC,MAAM,KAAK,MAAM;QACf,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IAChC,CAAC;IAES,YAAY;QACpB,KAAK,CAAC,YAAY,EAAE,CAAC;QACrB,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACnC,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW;aACjC,aAAa,CAAC,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC;aAC9B,MAAM,CAAC,CAAC,CAAO,EAAE,EAAE,CAAC,CAAC,YAAY,UAAU,CAAiB,CAAC;QAEhE,IAAI,UAAU,YAAY,UAAU,IAAI,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;YACjF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACtB;QAED,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;YAC5B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,IAAI,GAAG,eAAe,CAAC;YAC5B,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;SAClC;aAAM;YACL,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;SACzB;QAED,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;SACzB;IACH,CAAC;IAES,MAAM;QACd,MAAM,OAAO,GAAG;YACd,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,UAAU;SAC3C,CAAC;QACF,OAAO,CAAC,wBAAwB,IAAI,CAAC,YAAY,EAAE,CAAC,GAAG,IAAI,CAAC;QAE5D,OAAO,IAAI,CAAA;yCAC0B,QAAQ,CAAC,OAAO,CAAC,oBAAoB,IAAI,CAAC,QAAQ;iDAC1C,IAAI,CAAC,OAAO,eAAe,IAAI,CAAC,UAAU;YAC/E,KAAK,CAAC,MAAM,EAAE;;;;KAIrB,CAAC;IACJ,CAAC;IAEO,OAAO,CAAC,CAAQ;QACtB,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC;YAEzD,IAAI,CAAC,aAAa,CAChB,IAAI,WAAW,CAA0B,QAAQ,EAAE;gBACjD,MAAM,EAAE;oBACN,KAAK,EAAE,IAAI,CAAC,KAAK;oBACjB,QAAQ,EAAE,IAAI,CAAC,QAAQ;iBACxB;gBACD,OAAO,EAAE,IAAI;aACd,CAAC,CACH,CAAC;SACH;IACH,CAAC;IAEO,cAAc,CAAC,WAAW;QAChC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC3C,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,WAAW,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;aAC1C;YACD,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5C;IACH,CAAC;IAEO,UAAU,CAAC,CAAgB;QACjC,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;YACvC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;SACjB;IACH,CAAC;;AAnFM,gCAAiB,GAAG,EAAC,GAAG,UAAU,CAAC,iBAAiB,EAAE,cAAc,EAAE,IAAI,EAAC,CAAC;AACvB;IAA3D,QAAQ,CAAC,EAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAC,CAAC;kDAAoB;AACrC;IAAzC,QAAQ,CAAC,EAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAC,CAAC;gDAAkB;AACf;IAA3C,QAAQ,CAAC,EAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,KAAK,EAAC,CAAC;6CAAY;AAC3B;IAA3B,KAAK,CAAC,mBAAmB,CAAC;sDAA8B;AAC1C;IAAd,KAAK,CAAC,MAAM,CAAC;mDAAyC;AAN5C,cAAc;IAD1B,aAAa,CAAC,qBAAqB,CAAC;GACxB,cAAc,CAqF1B;SArFY,cAAc","sourcesContent":["import {customElement} from '@here/hds-base';\nimport {ListItem} from '@here/hds-list';\nimport {html, LitElement} from 'lit';\nimport {property, query} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {styles} from './hds-togglelist-item.css.js';\nimport {ToggleList, ToggleListChangePayload} from './hds-togglelist.js';\n\n/**\n * @slot default Content for item label\n *\n * @event {CustomEvent<{index: number; expanded: boolean}>} change Fired when item has changed its status: expanded / collapsed `ToggleListChangePayload`\n */\n@customElement('hds-togglelist-item')\nexport class ToggleListItem extends ListItem {\n  static shadowRootOptions = {...LitElement.shadowRootOptions, delegatesFocus: true};\n  @property({type: Boolean, attribute: false, reflect: true}) hasSubList = false;\n  @property({type: Boolean, reflect: true}) expanded = false;\n  @property({type: Number, attribute: false}) index = -1;\n  @query('.sub-list-wrapper') subListElement!: HTMLElement;\n  @query('slot') protected slotElement!: HTMLSlotElement;\n\n  static get styles(): any {\n    return [super.styles, styles];\n  }\n\n  protected firstUpdated() {\n    super.firstUpdated();\n    const parentElem = this.parentNode;\n    const slotContent = this.slotElement\n      .assignedNodes({flatten: true})\n      .filter((e: Node) => e instanceof ToggleList) as ToggleList[];\n\n    if (parentElem instanceof ToggleList && parentElem.classList.contains('disabled')) {\n      this.disabled = true;\n    }\n\n    if (slotContent.length !== 0) {\n      this.hasSubList = true;\n      this.icon = 'chevron-right';\n      this._appendSubList(slotContent);\n    } else {\n      this.hasSubList = false;\n    }\n\n    if (this.hasTooltip) {\n      this.hasTooltip = false;\n    }\n  }\n\n  protected render() {\n    const classes = {\n      disabled: this.disabled,\n      expanded: this.expanded && this.hasSubList,\n    };\n    classes[`hds-toggle-list-item-${this.groupVariant}`] = true;\n\n    return html`\n      <div class=\"-hds-togglelist-item ${classMap(classes)}\" aria-expanded=\"${this.expanded}\">\n        <div class=\"main-list-wrapper\" @click=\"${this._toggle}\" @keydown=\"${this._onKeyDown}\">\n          ${super.render()}\n        </div>\n        <div class=\"sub-list-wrapper\"></div>\n      </div>\n    `;\n  }\n\n  private _toggle(e: Event) {\n    e.stopPropagation();\n    if (!this.disabled) {\n      this.expanded = this.hasSubList ? !this.expanded : false;\n\n      this.dispatchEvent(\n        new CustomEvent<ToggleListChangePayload>('change', {\n          detail: {\n            index: this.index,\n            expanded: this.expanded,\n          },\n          bubbles: true,\n        })\n      );\n    }\n  }\n\n  private _appendSubList(slotContent) {\n    for (let i = 0; i < slotContent.length; i++) {\n      if (this.disabled) {\n        slotContent[i].classList.add('disabled');\n      }\n      this.subListElement.append(slotContent[i]);\n    }\n  }\n\n  private _onKeyDown(e: KeyboardEvent) {\n    e.preventDefault();\n    if (['Enter', 'Space'].includes(e.code)) {\n      this._toggle(e);\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'hds-togglelist-item': ToggleListItem;\n  }\n}\n"]}