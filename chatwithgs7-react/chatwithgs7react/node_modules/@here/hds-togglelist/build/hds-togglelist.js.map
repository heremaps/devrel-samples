{"version":3,"file":"hds-togglelist.js","sourceRoot":"","sources":["../src/hds-togglelist.ts"],"names":[],"mappings":"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","sourcesContent":["import {customElement} from '@here/hds-base';\nimport {List} from '@here/hds-list';\nimport {html, LitElement} from 'lit';\nimport {property, query} from 'lit/decorators.js';\nimport {ToggleListItem} from './hds-togglelist-item.js';\nimport {styles} from './hds-togglelist.css.js';\n\nexport type TogglelistExpandMode = 'one' | 'many';\nexport type ToggleListChangePayload = {index: number; expanded: boolean};\n\n/**\n * @slot default Content for the `hds-togglelist-item` elements\n *\n * @event {CustomEvent<{index: number; expanded: boolean}>} change Fired when item has changed its status: expanded / collapsed `ToggleListChangePayload`\n * @event {CustomEvent<{id: string; index: number}>} select Fired when an item has been selected `ListSelectPayload`\n *\n */\n@customElement('hds-togglelist')\nexport class ToggleList extends List {\n  static shadowRootOptions = {...LitElement.shadowRootOptions, delegatesFocus: true};\n  @property({type: String, reflect: true, attribute: 'expand-mode'})\n  expandMode: TogglelistExpandMode = 'many';\n  @property({type: Boolean, reflect: true, attribute: 'default-expanded'}) defaultExpanded = false;\n  @query('slot') protected slotElement!: HTMLSlotElement;\n\n  static get styles(): any {\n    return [super.styles, styles];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.addEventListener('change', this._onChange as EventListener);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListener('change', this._onChange as EventListener);\n  }\n\n  protected render() {\n    return html`\n      <div class=\"-hds-togglelist\" @slotchange=\"${this._onListSlotChange}\">${super.render()}</div>\n    `;\n  }\n\n  private _getListItems() {\n    return this.slotElement\n      .assignedNodes({flatten: true})\n      .filter((e: Node) => e instanceof ToggleListItem) as ToggleListItem[];\n  }\n\n  private _updateItems() {\n    const items = this._getListItems();\n    for (let i = 0; i < items.length; i++) {\n      items[i].index = i;\n    }\n  }\n\n  private _onChange(e: CustomEvent<ToggleListChangePayload>) {\n    if (this.expandMode === 'one') {\n      const event = e;\n      if (event.detail.index > -1 && event.detail.expanded) {\n        this._getListItems().forEach(item => {\n          item.expanded = event.detail.expanded ? e.target === item : false;\n        });\n      }\n    }\n  }\n\n  private _onListSlotChange() {\n    if (this.defaultExpanded) {\n      const items = this._getListItems();\n      for (let i = 0; i < items.length; i++) {\n        if (items[i].hasSubList && !items[i].disabled) {\n          items[i].expanded = true;\n          if (this.expandMode === 'one') {\n            break;\n          }\n        }\n      }\n    }\n    this._updateItems();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'hds-togglelist': ToggleList;\n  }\n}\n"]}